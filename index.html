<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Grammer Cuarentena</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="lib/chart.js"></script>
    <script src="lib/chartbundle.js"></script>
    <script src="https://unpkg.com/chartjs-gauge@0.3.0/dist/chartjs-gauge.js"></script>


    <script src="https://cdn.jsdelivr.net/npm/chart.js@latest/dist/Chart.min.js"></script>
    <!-- favicon
		============================================
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">-->
    <!-- Google Fonts
		============================================ -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900" rel="stylesheet">
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <!-- owl.carousel CSS
		============================================ -->
    <link rel="stylesheet" href="css/owl.carousel.css">
    <link rel="stylesheet" href="css/owl.theme.css">
    <link rel="stylesheet" href="css/owl.transitions.css">
    <!-- animate CSS
		============================================ -->
    <link rel="stylesheet" href="css/animate.css">
    <!-- normalize CSS
		============================================ -->
    <link rel="stylesheet" href="css/normalize.css">
    <!-- meanmenu icon CSS
		============================================ -->
    <link rel="stylesheet" href="css/meanmenu.min.css">
    <!-- main CSS
		============================================ -->
    <link rel="stylesheet" href="css/main.css">
    <!-- educate icon CSS
		============================================ -->
    <link rel="stylesheet" href="css/educate-custon-icon.css">
    <!-- morrisjs CSS
		============================================ -->
    <link rel="stylesheet" href="css/morrisjs/morris.css">
    <!-- mCustomScrollbar CSS
		============================================ -->
    <link rel="stylesheet" href="css/scrollbar/jquery.mCustomScrollbar.min.css">
    <!-- metisMenu CSS
		============================================ -->
    <link rel="stylesheet" href="css/metisMenu/metisMenu.min.css">
    <link rel="stylesheet" href="css/metisMenu/metisMenu-vertical.css">
    <!-- calendar CSS
		============================================ -->
    <link rel="stylesheet" href="css/calendar/fullcalendar.min.css">
    <link rel="stylesheet" href="css/calendar/fullcalendar.print.min.css">
    <!-- style CSS
		============================================ -->
    <link rel="stylesheet" href="style.css">
    <!-- responsive CSS
		============================================ -->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- modernizr JS
		============================================ -->
    <script src="js/vendor/modernizr-2.8.3.min.js"></script>

    <script src="report/js/jquery.min.js"></script>
    <link rel="stylesheet" href="report/css/bootstrap.min.css">
    <link rel="stylesheet" href="report/css/bootstrap-theme.min.css">
    <script src="report/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="report/css/jquery.dataTables.min.css"/>
    <script type="text/javascript" src="report/js/datatables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="report/pdf/all.min.css"/>
    <script src="datepicker/moment.min.js"></script>
    <script type="text/javascript" src="datepicker/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="datepicker/css/bootstrap-datepicker.min.css"/>
    <script type="text/javascript" src="datepicker/js/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="datepicker/css/daterangepicker.css"/>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.css"/>


    <style>
        .gauge {
            margin-top: 30px;
            margin-bottom: 30px;
            margin-left: 8px;
            width: 90%;
            max-width: 250px;
            font-family: "Roboto", sans-serif;
            font-size: 32px;
            color: rgb(0, 0, 0);
        }

        .gauge__body {
            width: 100%;
            height: 0;
            padding-bottom: 50%;
            background: #b4c0be;
            position: relative;
            border-top-left-radius: 100% 200%;
            border-top-right-radius: 100% 200%;
            overflow: hidden;
        }

        .gauge__fill {
            position: absolute;
            top: 100%;
            left: 0;
            width: inherit;
            height: 100%;
            background: #009578;
            border-width: 2px;
            border-top-style: solid;
            border-top-color: black;
            transform-origin: center top;
            transform: rotate(0.25turn);
            transition: transform 0.2s ease-out;
        }

        .gauge__cover {
            width: 75%;
            height: 150%;
            background: rgb(255, 255, 255);
            border-radius: 50%;
            position: absolute;
            top: 25%;
            left: 50%;
            transform: translateX(-50%);

            /* Text */
            display: flex;
            align-items: center;
            justify-content: center;
            padding-bottom: 25%;
            box-sizing: border-box;
        }

        .circulo {
            width: 5px;
            height: 5px;
            -moz-border-radius: 50%;
            -webkit-border-radius: 50%;
            border-radius: 50%;
            background: #5cb85c;
        }
    </style>


</head>

<body>

<div class="all-content-wrapper">
    <center><img src="img/pf.png" style="width:70% ;"></center>



    <div class="analytics-sparkle-area">
        <div class="container-fluid">

            <select class="form-control form-control-lg mr-sm-2 bg-transparent" id="cbFiltro"
                    onchange="Apu()">
                <option value="TODO" selected>Todo</option>
                <option value="PO45" >PO 45</option>
                <option value="OTROS" >Otros PO</option>
            </select>

            <br>

            <div class="row">
                <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                    <div class="analytics-sparkle-line reso-mg-b-30" style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">PF Confirmados</h5>
                            <h2 style="color:white !important;"><span class="" id="totalConfirmados">0</span> <span
                                    style="color:white !important;" class="tuition-fees">finding
                                        made</span></h2>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                    <div class="analytics-sparkle-line reso-mg-b-30" style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">PF Pendientes</h5>
                            <h2 style="color:white !important;"><span class="" id="totalRechazados">0</span> <span
                                    style="color:white !important;" class="tuition-fees">
                                        reports released</span></h2>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                    <div class="analytics-sparkle-line reso-mg-b-30 table-mg-t-pro dk-res-t-pro-30"
                         style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">PF Rechazados</h5>
                            <h2 style="color:white !important;"><span class="" id="totalPendientes">0</span> <span
                                    style="color:white !important;" class="tuition-fees">pending
                                        reports
                                    </span></h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>

    <div class="product-sales-area mg-tb-30">

        <div class="container-fluid">
            <div class="row">


                <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                    <div class="single-cards-item">
                        <div id="areaChartApu"></div>
                    </div>
                </div>

                <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                    <div class="single-cards-item">
                        <div id="area"></div>
                    </div>
                </div>

                <br><br>
                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                    <div class="analytics-sparkle-line reso-mg-b-30" style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">NO RECOVERY</h5>
                            <h2 style="color:white !important;"><span class="" id="spanNoRecovery">0</span> <span
                                    style="color:white !important;" class="tuition-fees">euros</span></h2>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                    <div class="analytics-sparkle-line reso-mg-b-30" style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">SUPPLIER</h5>
                            <h2 style="color:white !important;"><span class="" id="spanSupplier">0</span> <span
                                    style="color:white !important;" class="tuition-fees">euros</span></h2>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                    <div class="analytics-sparkle-line reso-mg-b-30" style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">IC-SUPPLIER</h5>
                            <h2 style="color:white !important;"><span class="" id="spanIcSupplier">0</span> <span
                                    style="color:white !important;" class="tuition-fees">euros</span></h2>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                    <div class="analytics-sparkle-line reso-mg-b-30" style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">CUSTOMER</h5>
                            <h2 style="color:white !important;"><span class="" id="spanCustomer">0</span> <span
                                    style="color:white !important;" class="tuition-fees">euros</span></h2>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                    <div class="analytics-sparkle-line reso-mg-b-30" style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">IC-CUSTOMER</h5>
                            <h2 style="color:white !important;"><span class="" id="spanIcCustomer">0</span> <span
                                    style="color:white !important;" class="tuition-fees">euros</span></h2>
                        </div>
                    </div>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                    <div class="analytics-sparkle-line reso-mg-b-30" style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">FORWARDER</h5>
                            <h2 style="color:white !important;"><span class="" id="spanForwarder">0</span> <span
                                    style="color:white !important;" class="tuition-fees">euros</span></h2>
                        </div>
                    </div>
                </div>

            </div>

            <hr>
            <br>
            <div class="row">




                <div class="col-lg-10 col-md-10 col-sm-10 col-xs-10">
                    <h1 >Grafica Detallada</h1>
                    <label>Selecciona el tipo</label>
                    <br>
                    <select class="form-control form-control-lg mr-sm-2 bg-transparent" id="cbTipo"
                            onchange="graficaDetallada()">
                        <option selected>Abrir menu</option>
                        <option value="NO RECOVERY" >NO RECOVERY</option>
                        <option value="SUPPLIER" >SUPPLIER</option>
                        <option value="IC-SUPPLIER" >IC-SUPPLIER</option>
                        <option value="CUSTOMER" >CUSTOMER</option>
                        <option value="IC-CUSTOMER" >IC-CUSTOMER</option>
                        <option value="FORWARDER" >FORWARDER</option>
                        <option value="TODO" >TODO</option>
                    </select>
                    <br><br>
                    <div class="single-cards-item">
                        <div id="areaDetallada"></div>
                    </div>
                </div>

                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2">
                    <div class="analytics-sparkle-line reso-mg-b-30 table-mg-t-pro dk-res-t-pro-30"
                         style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">Costo por meses</h5>
                            <h2 style="color:white !important;"><span class="" id="spanEnero">0</span> <span
                                    style="color:white !important;" class="tuition-fees">Enero
                                    </span></h2>

                            <h2 style="color:white !important;"><span class="" id="spanFebrero">0</span> <span
                                    style="color:white !important;" class="tuition-fees">Febrero
                                    </span></h2>

                            <h2 style="color:white !important;"><span class="" id="spanMarzo">0</span> <span
                                    style="color:white !important;" class="tuition-fees">Marzo
                                    </span></h2>

                            <h2 style="color:white !important;"><span class="" id="spanAbril">0</span> <span
                                    style="color:white !important;" class="tuition-fees">Abril
                                    </span></h2>

                            <h2 style="color:white !important;"><span class="" id="spanMayo">0</span> <span
                                    style="color:white !important;" class="tuition-fees">Mayo
                                    </span></h2>

                            <h2 style="color:white !important;"><span class="" id="spanJunio">0</span> <span
                                    style="color:white !important;" class="tuition-fees">Junio
                                    </span></h2>

                            <h2 style="color:white !important;"><span class="" id="spanJulio">0</span> <span
                                    style="color:white !important;" class="tuition-fees">Julio
                                    </span></h2>

                            <h2 style="color:white !important;"><span class="" id="spanAgosto">0</span> <span
                                    style="color:white !important;" class="tuition-fees">Agosto
                                    </span></h2>

                            <h2 style="color:white !important;"><span class="" id="spanSeptiembre">0</span> <span
                                    style="color:white !important;" class="tuition-fees">Septiembre
                                    </span></h2>

                            <h2 style="color:white !important;"><span class="" id="spanOctubre">0</span> <span
                                    style="color:white !important;" class="tuition-fees">Octubre
                                    </span></h2>

                            <h2 style="color:white !important;"><span class="" id="spanNoviembre">0</span> <span
                                    style="color:white !important;" class="tuition-fees">Noviembre
                                    </span></h2>

                            <h2 style="color:white !important;"><span class="" id="spanDiciembre">0</span> <span
                                    style="color:white !important;" class="tuition-fees">Diciembre
                                    </span></h2>

                            <h2 style="color:white !important;"><span class="" id="spanTotal">0</span> <span
                                    style="color:white !important;" class="tuition-fees">Total
                                    </span></h2>
                        </div>
                    </div>
                </div>



            </div>

        </div>
    </div>

    <div class="product-sales-area mg-tb-30">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="single-cards-item">
                        <canvas style="padding: 27px;" id="grafica"></canvas>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="single-cards-item">
                        <canvas style="padding: 27px;" id="graficaGeneral"></canvas>
                    </div>
                </div>

                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="single-cards-item">
                        <canvas style="padding: 27px;" id="graficaProveedor"></canvas>
                    </div>
                </div>


            </div>
        </div>
    </div>

</div>

<!-- jquery
    ============================================ -->
<script src="js/vendor/jquery-1.12.4.min.js"></script>
<!-- bootstrap JS
    ============================================ -->
<script src="js/bootstrap.min.js"></script>
<!-- wow JS
    ============================================ -->
<!-- price-slider JS
    ============================================ -->
<script src="js/jquery-price-slider.js"></script>
<!-- meanmenu JS
    ============================================ -->
<script src="js/jquery.meanmenu.js"></script>
<!-- owl.carousel JS
    ============================================ -->
<script src="js/owl.carousel.min.js"></script>
<!-- sticky JS
    ============================================ -->
<script src="js/jquery.sticky.js"></script>
<!-- scrollUp JS
    ============================================ -->
<script src="js/jquery.scrollUp.min.js"></script>
<!-- mCustomScrollbar JS
    ============================================ -->
<script src="js/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="js/scrollbar/mCustomScrollbar-active.js"></script>
<!-- metisMenu JS
    ============================================ -->
<script src="js/metisMenu/metisMenu.min.js"></script>
<script src="js/metisMenu/metisMenu-active.js"></script>
<!-- morrisjs JS
    ============================================ -->
<script src="js/morrisjs/raphael-min.js"></script>
<!-- morrisjs JS
    ============================================ -->
<script src="js/sparkline/jquery.sparkline.min.js"></script>
<script src="js/sparkline/jquery.charts-sparkline.js"></script>
<script src="js/sparkline/sparkline-active.js"></script>
<!-- calendar JS
    ============================================ -->
<script src="js/calendar/moment.min.js"></script>
<script src="js/calendar/fullcalendar.min.js"></script>
<script src="js/calendar/fullcalendar-active.js"></script>
<!-- plugins JS
    ============================================ -->
<script src="js/plugins.js"></script>
<!-- main JS
    ============================================ -->
<script src="js/main.js"></script>

<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.print.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.colVis.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script>



    contadoresIniciales();
    function contadoresIniciales() {
        $.getJSON("https://grammermx.com/Programas/Trafico/DashBoard/dao/consultaContadores.php", function (data) {
            for (var i = 0; i < data.data.length; i++) {
                document.getElementById('totalPendientes').innerHTML = data.data[i].CountPL;
                document.getElementById('totalRechazados').innerHTML = data.data[i].CountR;
                document.getElementById('totalConfirmados').innerHTML = data.data[i].CountC;
            }
        });
    }
    contadoresAreas();
    function contadoresAreas() {
        $.getJSON("https://grammermx.com/Programas/Trafico/DashBoard/dao/consultaAreas.php", function (data) {
            var areas = {};
            for (var i = 0; i < data.data.length; i++) {
                var area = data.data[i].AREA;
                var suma = parseFloat(data.data[i].SUMA);
                var moneda = data.data[i].MONEDA;

                if (moneda === "MXN") {
                    suma = suma * conversionPesos;
                } else if (moneda === "USD") {
                    suma = suma * conversionDolar;
                }

                if (areas[area]) {
                    areas[area] += suma;
                } else {
                    areas[area] = suma;
                }
            }

            var labels = Object.keys(areas);
            var values = Object.values(areas);

            console.log(labels); // Esto imprimirá los labels (AREAS)
            console.log(values); // Esto imprimirá los valores (SUMAS convertidas y sumadas)
            areasChart(labels,values);
            // Aquí puedes hacer lo que necesites con los labels y values
        });
    }

    var conversionPesos=0;
    var conversionDolar=0;

    $.getJSON('https://api.exchangerate-api.com/v4/latest/MXN', function(data) {
        conversionPesos = data.rates.EUR;
        console.log(conversionPesos);
    });

    $.getJSON('https://api.exchangerate-api.com/v4/latest/USD', function(data) {
        conversionDolar = data.rates.EUR;
        console.log(conversionDolar);
    });

    Apu();
    function Apu() {
        $.getJSON('https://grammermx.com/Programas/Trafico/DashBoard/dao/consultaGeneral.php?filtro='+document.getElementById("cbFiltro").value, function (data) {

            var noRecovery = 0, supplier = 0, icSupplier = 0, custumer = 0, icCustumer = 0,
            forwarder = 0;

            for (var i = 0; i < data.data.length; i++) {
                if (data.data[i].MONEDA === "MXN"){
                    if (data.data[i].RECOVERY === 'NO RECOVERY') {
                        noRecovery = +(data.data[i].SUMA*conversionPesos).toFixed(2);
                    }
                    if (data.data[i].RECOVERY === 'SUPPLIER') {
                        supplier = +(data.data[i].SUMA*conversionPesos).toFixed(2);
                    }
                    if (data.data[i].RECOVERY === 'IC-SUPPLIER') {
                        icSupplier = +(data.data[i].SUMA*conversionPesos).toFixed(2);
                    }
                    if (data.data[i].RECOVERY === 'CUSTOMER') {
                        custumer = +(data.data[i].SUMA*conversionPesos).toFixed(2);
                    }
                    if (data.data[i].RECOVERY === 'IC-CUSTOMER') {
                        icCustumer = +(data.data[i].SUMA*conversionPesos).toFixed(2);
                    }
                    if (data.data[i].RECOVERY === 'FORWARDER') {
                        forwarder = +(data.data[i].SUMA*conversionPesos).toFixed(2);
                    }
                }

                if (data.data[i].Encargado === "USD"){
                    if (data.data[i].RECOVERY === 'NO RECOVERY') {
                        noRecovery = +(data.data[i].SUMA*conversionDolar).toFixed(2);
                    }
                    if (data.data[i].RECOVERY === 'SUPPLIER') {
                        supplier = +(data.data[i].SUMA*conversionDolar).toFixed(2);
                    }
                    if (data.data[i].RECOVERY === 'IC-SUPPLIER') {
                        icSupplier = +(data.data[i].SUMA*conversionDolar).toFixed(2);
                    }
                    if (data.data[i].RECOVERY === 'CUSTOMER') {
                        custumer = +(data.data[i].SUMA*conversionDolar).toFixed(2);
                    }
                    if (data.data[i].RECOVERY === 'IC-CUSTOMER') {
                        icCustumer = +(data.data[i].SUMA*conversionDolar).toFixed(2);
                    }
                    if (data.data[i].RECOVERY === 'FORWARDER') {
                        forwarder = +(data.data[i].SUMA*conversionDolar).toFixed(2);
                    }
                }

            }

            document.getElementById("spanNoRecovery").innerText = parseFloat(noRecovery).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanSupplier").innerText = parseFloat(supplier).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanIcSupplier").innerText = parseFloat(icSupplier).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanCustomer").innerText = parseFloat(custumer).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanIcCustomer").innerText = parseFloat(icCustumer).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanForwarder").innerText = parseFloat(forwarder).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });

            graficaAusentismosApu(noRecovery,supplier ,icSupplier ,custumer ,icCustumer ,forwarder);
        });
    }

    var chart;

    function graficaAusentismosApu(noRecovery,supplier ,icSupplier ,custumer ,icCustumer ,forwarder) {

        if (chart) {
            chart.destroy();
        }

        var options = {
            series: [{
                name: 'Generales',
                data: [noRecovery, supplier, icSupplier, custumer, icCustumer, forwarder]
            }
            ],
            chart: {
                type: 'bar',
                height: 350
            },
            plotOptions: {
                bar: {
                    horizontal: false,
                    columnWidth: '65%',
                    endingShape: 'rounded'
                },
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                show: true,
                width: 5,
                colors: ['transparent']
            },
            xaxis: {
                categories: ['NO RECOVERY', 'SUPPLIER', 'IC-SUPPLIER', 'CUSTUMER', 'IC-CUSTUMER', 'FORWARDER'],
            },
            yaxis: {
                title: {
                    text: 'EUR'
                }
            },
            fill: {
                opacity: 1
            },
            tooltip: {
                y: {
                    formatter: function (val) {
                        return " " + val + " EUR"
                    }
                }
            }
        };
        chart = new ApexCharts(document.querySelector("#areaChartApu"), options);
        chart.render();
    }

    function graficaDetallada() {

        var tipo = document.getElementById("cbTipo").value;

        $.getJSON('https://grammermx.com/Programas/Trafico/DashBoard/dao/consultaDetallada.php?tipo='+tipo, function (data) {

            var Ene1 = 0, Feb1 = 0, Mar1 = 0, Abril1 = 0, May1 = 0, Jun1 = 0, Jul1 = 0, Ago1 = 0,
                Sep1 = 0, Oct1 = 0, Nov1 = 0, Dic1 = 0;

            for (var i = 0; i < data.data.length; i++) {

                if (data.data[i].Mes === '1') {
                    if (data.data[i].MONEDA === 'MXN'){
                        Ene1 += data.data[i].SUMA*conversionPesos;
                    }else{
                        Ene1 += data.data[i].SUMA*conversionDolar;
                    }
                }
                if (data.data[i].Mes === '2') {
                    if (data.data[i].MONEDA === 'MXN'){
                        Feb1 += data.data[i].SUMA*conversionPesos;
                    }else{
                        Feb1 += data.data[i].SUMA*conversionDolar;
                    }
                }
                if (data.data[i].Mes === '3') {
                    if (data.data[i].MONEDA === 'MXN'){
                        Mar1 += data.data[i].SUMA*conversionPesos;
                    }else{
                        Mar1 += data.data[i].SUMA*conversionDolar;
                    }
                }
                if (data.data[i].Mes === '4') {
                    if (data.data[i].MONEDA === 'MXN'){
                        Abril1 += data.data[i].SUMA*conversionPesos;
                    }else{
                        Abril1 += data.data[i].SUMA*conversionDolar;
                    }
                }
                if (data.data[i].Mes === '5') {
                    if (data.data[i].MONEDA === 'MXN'){
                        May1 += data.data[i].SUMA*conversionPesos;
                    }else{
                        May1 += data.data[i].SUMA*conversionDolar;
                    }
                }
                if (data.data[i].Mes === '6') {
                    if (data.data[i].MONEDA === 'MXN'){
                        Jun1 += data.data[i].SUMA*conversionPesos;
                    }else{
                        Jun1 += data.data[i].SUMA*conversionDolar;
                    }
                }
                if (data.data[i].Mes === '7') {
                    if (data.data[i].MONEDA === 'MXN'){
                        Jul1 += data.data[i].SUMA*conversionPesos;
                    }else{
                        Jul1 += data.data[i].SUMA*conversionDolar;
                    }
                }
                if (data.data[i].Mes === '8') {
                    if (data.data[i].MONEDA === 'MXN'){
                        Ago1 += data.data[i].SUMA*conversionPesos;
                    }else{
                        Ago1 += data.data[i].SUMA*conversionDolar;
                    }
                }
                if (data.data[i].Mes === '9') {
                    if (data.data[i].MONEDA === 'MXN'){
                        Sep1 += data.data[i].SUMA*conversionPesos;
                    }else{
                        Sep1 += data.data[i].SUMA*conversionDolar;
                    }
                }
                if (data.data[i].Mes === '10') {
                    if (data.data[i].MONEDA === 'MXN'){
                        Oct1 += data.data[i].SUMA*conversionPesos;
                    }else{
                        Oct1 += data.data[i].SUMA*conversionDolar;
                    }
                }
                if (data.data[i].Mes === '11') {
                    if (data.data[i].MONEDA === 'MXN'){
                        Nov1 += data.data[i].SUMA*conversionPesos;
                    }else{
                        Nov1 += data.data[i].SUMA*conversionDolar;
                    }
                }
                if (data.data[i].Mes === '12') {
                    if (data.data[i].MONEDA === 'MXN'){
                        Dic1 += data.data[i].SUMA*conversionPesos;
                    }else{
                        Dic1 += data.data[i].SUMA*conversionDolar;
                    }
                }

            }

            // Aplicar toFixed(2) a cada mes
            Ene1 = Ene1.toFixed(2);
            Feb1 = Feb1.toFixed(2);
            Mar1 = Mar1.toFixed(2);
            Abril1 = Abril1.toFixed(2);
            May1 = May1.toFixed(2);
            Jun1 = Jun1.toFixed(2);
            Jul1 = Jul1.toFixed(2);
            Ago1 = Ago1.toFixed(2);
            Sep1 = Sep1.toFixed(2);
            Oct1 = Oct1.toFixed(2);
            Nov1 = Nov1.toFixed(2);
            Dic1 = Dic1.toFixed(2);

            document.getElementById("spanEnero").innerText = parseFloat(Ene1).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanFebrero").innerText = parseFloat(Feb1).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanMarzo").innerText = parseFloat(Mar1).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanAbril").innerText = parseFloat(Abril1).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanMayo").innerText = parseFloat(May1).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanJunio").innerText = parseFloat(Jun1).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanJulio").innerText = parseFloat(Jul1).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanAgosto").innerText = parseFloat(Ago1).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanSeptiembre").innerText = parseFloat(Sep1).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanOctubre").innerText = parseFloat(Oct1).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanNoviembre").innerText = parseFloat(Nov1).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });
            document.getElementById("spanDiciembre").innerText = parseFloat(Dic1).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });

            document.getElementById("spanTotal").innerText = (parseFloat(Ene1) + parseFloat(Feb1) + parseFloat(Mar1) + parseFloat(Abril1) + parseFloat(May1) + parseFloat(Jun1) + parseFloat(Jul1) + parseFloat(Ago1) + parseFloat(Sep1) + parseFloat(Oct1) + parseFloat(Nov1) + parseFloat(Dic1)).toLocaleString('de-DE', { style: 'currency', currency: 'EUR' });

            graficaDetalle(Ene1, Feb1, Mar1, Abril1, May1, Jun1, Jul1, Ago1, Sep1, Oct1, Nov1, Dic1);
        });
    }
    var chartDetallada;
    function graficaDetalle(Ene1, Feb1, Mar1, Abril1, May1, Jun1, Jul1, Ago1, Sep1, Oct1, Nov1, Dic1) {

        if (chartDetallada) {
            chartDetallada.destroy();
        }

        var options = {
            series: [{
                name: 'Meses',
                data: [Ene1, Feb1, Mar1, Abril1, May1, Jun1, Jul1, Ago1, Sep1, Oct1, Nov1, Dic1]
            }
            ],
            chart: {
                type: 'bar',
                height: 350
            },
            plotOptions: {
                bar: {
                    horizontal: false,
                    columnWidth: '65%',
                    endingShape: 'rounded'
                },
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                show: true,
                width: 5,
                colors: ['transparent']
            },
            xaxis: {
                categories: ['Ene', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dic'],

            },
            yaxis: {
                title: {
                    text: 'EUR'
                }
            },
            fill: {
                opacity: 1
            },
            tooltip: {
                y: {
                    formatter: function (val) {
                        return " " + val + " EUR"
                    }
                }
            }
        };
        chartDetallada = new ApexCharts(document.querySelector("#areaDetallada"), options);
        chartDetallada.render();
    }

    var chartArea;

    function areasChart(labels,valores) {

        if (chartArea) {
            chartArea.destroy();
        }

        var options = {
            series: valores,
            chart: {
                width: 450,
                type: 'polarArea'
            },
            labels: labels,
            fill: {
                opacity: 1
            },
            stroke: {
                width: 1,
                colors: undefined
            },
            yaxis: {
                show: false
            },
            legend: {
                position: 'bottom'
            },
            plotOptions: {
                polarArea: {
                    rings: {
                        strokeWidth: 0
                    },
                    spokes: {
                        strokeWidth: 0
                    },
                }
            }
        };

        chartArea = new ApexCharts(document.querySelector("#area"), options);
        chartArea.render();
    }

</script>
</body>

</html>