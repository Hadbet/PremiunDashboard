<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Grammer Cuarentena</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="lib/chart.js"></script>
    <script src="lib/chartbundle.js"></script>
    <script src="https://unpkg.com/chartjs-gauge@0.3.0/dist/chartjs-gauge.js"></script>


    <script src="https://cdn.jsdelivr.net/npm/chart.js@latest/dist/Chart.min.js"></script>
    <!-- favicon
		============================================
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">-->
    <!-- Google Fonts
		============================================ -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900" rel="stylesheet">
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <!-- owl.carousel CSS
		============================================ -->
    <link rel="stylesheet" href="css/owl.carousel.css">
    <link rel="stylesheet" href="css/owl.theme.css">
    <link rel="stylesheet" href="css/owl.transitions.css">
    <!-- animate CSS
		============================================ -->
    <link rel="stylesheet" href="css/animate.css">
    <!-- normalize CSS
		============================================ -->
    <link rel="stylesheet" href="css/normalize.css">
    <!-- meanmenu icon CSS
		============================================ -->
    <link rel="stylesheet" href="css/meanmenu.min.css">
    <!-- main CSS
		============================================ -->
    <link rel="stylesheet" href="css/main.css">
    <!-- educate icon CSS
		============================================ -->
    <link rel="stylesheet" href="css/educate-custon-icon.css">
    <!-- morrisjs CSS
		============================================ -->
    <link rel="stylesheet" href="css/morrisjs/morris.css">
    <!-- mCustomScrollbar CSS
		============================================ -->
    <link rel="stylesheet" href="css/scrollbar/jquery.mCustomScrollbar.min.css">
    <!-- metisMenu CSS
		============================================ -->
    <link rel="stylesheet" href="css/metisMenu/metisMenu.min.css">
    <link rel="stylesheet" href="css/metisMenu/metisMenu-vertical.css">
    <!-- calendar CSS
		============================================ -->
    <link rel="stylesheet" href="css/calendar/fullcalendar.min.css">
    <link rel="stylesheet" href="css/calendar/fullcalendar.print.min.css">
    <!-- style CSS
		============================================ -->
    <link rel="stylesheet" href="style.css">
    <!-- responsive CSS
		============================================ -->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- modernizr JS
		============================================ -->
    <script src="js/vendor/modernizr-2.8.3.min.js"></script>

    <script src="report/js/jquery.min.js"></script>
    <link rel="stylesheet" href="report/css/bootstrap.min.css">
    <link rel="stylesheet" href="report/css/bootstrap-theme.min.css">
    <script src="report/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="report/css/jquery.dataTables.min.css"/>
    <script type="text/javascript" src="report/js/datatables.min.js"></script>
    <link rel="stylesheet" type="text/css" href="report/pdf/all.min.css"/>
    <script src="datepicker/moment.min.js"></script>
    <script type="text/javascript" src="datepicker/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="datepicker/css/bootstrap-datepicker.min.css"/>
    <script type="text/javascript" src="datepicker/js/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="datepicker/css/daterangepicker.css"/>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.css"/>


    <style>
        .gauge {
            margin-top: 30px;
            margin-bottom: 30px;
            margin-left: 8px;
            width: 90%;
            max-width: 250px;
            font-family: "Roboto", sans-serif;
            font-size: 32px;
            color: rgb(0, 0, 0);
        }

        .gauge__body {
            width: 100%;
            height: 0;
            padding-bottom: 50%;
            background: #b4c0be;
            position: relative;
            border-top-left-radius: 100% 200%;
            border-top-right-radius: 100% 200%;
            overflow: hidden;
        }

        .gauge__fill {
            position: absolute;
            top: 100%;
            left: 0;
            width: inherit;
            height: 100%;
            background: #009578;
            border-width: 2px;
            border-top-style: solid;
            border-top-color: black;
            transform-origin: center top;
            transform: rotate(0.25turn);
            transition: transform 0.2s ease-out;
        }

        .gauge__cover {
            width: 75%;
            height: 150%;
            background: rgb(255, 255, 255);
            border-radius: 50%;
            position: absolute;
            top: 25%;
            left: 50%;
            transform: translateX(-50%);

            /* Text */
            display: flex;
            align-items: center;
            justify-content: center;
            padding-bottom: 25%;
            box-sizing: border-box;
        }

        .circulo {
            width: 5px;
            height: 5px;
            -moz-border-radius: 50%;
            -webkit-border-radius: 50%;
            border-radius: 50%;
            background: #5cb85c;
        }
    </style>


</head>

<body>

<div class="all-content-wrapper">
    <center><img src="img/pf.png" style="width:70% ;"></center>
    <div class="analytics-sparkle-area">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                    <div class="analytics-sparkle-line reso-mg-b-30" style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">Rango de fecha</h5>
                            <input id="txtFechaInicio" type="date">
                            <input id="txtFechaFinal" type="date">
                            <button onclick="prelistaBoton()">Buscar</button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                    <div class="analytics-sparkle-line reso-mg-b-30" style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">Meses</h5>
                            <input type="month" id="mesSeleccionadoInicial" name="mesSeleccionado">
                            <input type="month" id="mesSeleccionadoFinal" name="mesSeleccionado">
                            <button onclick="prelistaBotonMeses()">Buscar</button>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                    <div class="analytics-sparkle-line reso-mg-b-30 table-mg-t-pro dk-res-t-pro-30"
                         style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">Semanas</h5>
                            <input type="week" id="semanaSeleccionada" name="semanaSeleccionada"
                                   onchange="prelistaBotonSemanas()">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <div class="analytics-sparkle-area">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                    <div class="analytics-sparkle-line reso-mg-b-30" style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">PF Confirmados</h5>
                            <h2 style="color:white !important;"><span class="" id="totalConfirmados">0</span> <span
                                    style="color:white !important;" class="tuition-fees">finding
                                        made</span></h2>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                    <div class="analytics-sparkle-line reso-mg-b-30" style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">PF Pendientes</h5>
                            <h2 style="color:white !important;"><span class="" id="totalRechazados">0</span> <span
                                    style="color:white !important;" class="tuition-fees">
                                        reports released</span></h2>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                    <div class="analytics-sparkle-line reso-mg-b-30 table-mg-t-pro dk-res-t-pro-30"
                         style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">PF Rechazados</h5>
                            <h2 style="color:white !important;"><span class="" id="totalPendientes">0</span> <span
                                    style="color:white !important;" class="tuition-fees">pending
                                        reports
                                    </span></h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="analytics-sparkle-area">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-4 col-md-6 col-sm-6 col-xs-12">
                    <div class="analytics-sparkle-line reso-mg-b-30" style="background: #085591;">
                        <div class="analytics-content">
                            <h5 style="color:white !important;">Grafica General del Año</h5>
                            <div class="map-box">
                                <div id="areaChartApu"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="product-sales-area mg-tb-30">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="single-cards-item">
                        <canvas style="padding: 27px;" id="grafica"></canvas>
                    </div>
                </div>
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="single-cards-item">
                        <canvas style="padding: 27px;" id="graficaGeneral"></canvas>
                    </div>
                </div>

                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="single-cards-item">
                        <canvas style="padding: 27px;" id="graficaProveedor"></canvas>
                    </div>
                </div>


            </div>
        </div>
    </div>

</div>

<!-- jquery
    ============================================ -->
<script src="js/vendor/jquery-1.12.4.min.js"></script>
<!-- bootstrap JS
    ============================================ -->
<script src="js/bootstrap.min.js"></script>
<!-- wow JS
    ============================================ -->
<!-- price-slider JS
    ============================================ -->
<script src="js/jquery-price-slider.js"></script>
<!-- meanmenu JS
    ============================================ -->
<script src="js/jquery.meanmenu.js"></script>
<!-- owl.carousel JS
    ============================================ -->
<script src="js/owl.carousel.min.js"></script>
<!-- sticky JS
    ============================================ -->
<script src="js/jquery.sticky.js"></script>
<!-- scrollUp JS
    ============================================ -->
<script src="js/jquery.scrollUp.min.js"></script>
<!-- mCustomScrollbar JS
    ============================================ -->
<script src="js/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="js/scrollbar/mCustomScrollbar-active.js"></script>
<!-- metisMenu JS
    ============================================ -->
<script src="js/metisMenu/metisMenu.min.js"></script>
<script src="js/metisMenu/metisMenu-active.js"></script>
<!-- morrisjs JS
    ============================================ -->
<script src="js/morrisjs/raphael-min.js"></script>
<!-- morrisjs JS
    ============================================ -->
<script src="js/sparkline/jquery.sparkline.min.js"></script>
<script src="js/sparkline/jquery.charts-sparkline.js"></script>
<script src="js/sparkline/sparkline-active.js"></script>
<!-- calendar JS
    ============================================ -->
<script src="js/calendar/moment.min.js"></script>
<script src="js/calendar/fullcalendar.min.js"></script>
<script src="js/calendar/fullcalendar-active.js"></script>
<!-- plugins JS
    ============================================ -->
<script src="js/plugins.js"></script>
<!-- main JS
    ============================================ -->
<script src="js/main.js"></script>

<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.print.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.colVis.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>



    contadoresIniciales();
    function contadoresIniciales() {
        $.getJSON("https://grammermx.com/Programas/Trafico/DashBoard/dao/consultaContadores.php", function (data) {
            for (var i = 0; i < data.data.length; i++) {
                document.getElementById('totalPendientes').innerHTML = data.data[i].CountPL;
                document.getElementById('totalRechazados').innerHTML = data.data[i].CountR;
                document.getElementById('totalConfirmados').innerHTML = data.data[i].CountC;
            }
        });
    }

    var conversionPesos=0;
    var conversionDolar=0;

    $.getJSON('https://api.exchangerate-api.com/v4/latest/MXN', function(data) {
        conversionPesos = data.rates.EUR;
        console.log(conversionPesos);
    });

    $.getJSON('https://api.exchangerate-api.com/v4/latest/USD', function(data) {
        conversionDolar = data.rates.EUR;
        console.log(conversionDolar);
    });

    Apu()
    function Apu() {
        $.getJSON('https://grammermx.com/Programas/Trafico/DashBoard/dao/consultaGeneral.php', function (data) {

            var noRecovery = 0, supplier = 0, icSupplier = 0, custumer = 0, icCustumer = 0,
            forwarder = 0;

            for (var i = 0; i < data.data.length; i++) {
                if (data.data[i].MONEDA === "MXN"){
                    if (data.data[i].RECOVERY === 'NO RECOVERY') {
                        noRecovery = data.data[i].SUMA*conversionPesos;
                    }
                    if (data.data[i].RECOVERY === 'SUPPLIER') {
                        supplier = data.data[i].SUMA*conversionPesos;
                    }
                    if (data.data[i].RECOVERY === 'IC-SUPPLIER') {
                        icSupplier = data.data[i].SUMA*conversionPesos;
                    }
                    if (data.data[i].RECOVERY === 'CUSTOMER') {
                        custumer = data.data[i].SUMA*conversionPesos;
                    }
                    if (data.data[i].RECOVERY === 'IC-CUSTOMER') {
                        icCustumer = data.data[i].SUMA*conversionPesos;
                    }
                    if (data.data[i].RECOVERY === 'FORWARDER') {
                        forwarder = data.data[i].SUMA*conversionPesos;
                    }
                }

                if (data.data[i].Encargado === "USD"){
                    if (data.data[i].RECOVERY === 'NO RECOVERY') {
                        noRecovery = data.data[i].SUMA*conversionDolar;
                    }
                    if (data.data[i].RECOVERY === 'SUPPLIER') {
                        supplier = data.data[i].SUMA*conversionDolar;
                    }
                    if (data.data[i].RECOVERY === 'IC-SUPPLIER') {
                        icSupplier = data.data[i].SUMA*conversionDolar;
                    }
                    if (data.data[i].RECOVERY === 'CUSTOMER') {
                        custumer = data.data[i].SUMA*conversionDolar;
                    }
                    if (data.data[i].RECOVERY === 'IC-CUSTOMER') {
                        icCustumer = data.data[i].SUMA*conversionDolar;
                    }
                    if (data.data[i].RECOVERY === 'FORWARDER') {
                        forwarder = data.data[i].SUMA*conversionDolar;
                    }
                }

            }
            graficaAusentismosApu(noRecovery,supplier ,icSupplier ,custumer ,icCustumer ,forwarder);
        });
    }

    function graficaAusentismosApu(noRecovery,supplier ,icSupplier ,custumer ,icCustumer ,forwarder) {
        var options = {
            series: [{
                name: 'Generales',
                data: [noRecovery, supplier, icSupplier, custumer, icCustumer, forwarder]
            }
            ],
            chart: {
                type: 'bar',
                height: 350
            },
            plotOptions: {
                bar: {
                    horizontal: false,
                    columnWidth: '65%',
                    endingShape: 'rounded'
                },
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                show: true,
                width: 5,
                colors: ['transparent']
            },
            xaxis: {
                categories: ['NO RECOVERY', 'SUPPLIER', 'IC-SUPPLIER', 'CUSTUMER', 'IC-CUSTUMER', 'FORWARDER'],
            },
            yaxis: {
                title: {
                    text: 'Personas'
                }
            },
            fill: {
                opacity: 1
            },
            tooltip: {
                y: {
                    formatter: function (val) {
                        return " " + val + " personas"
                    }
                }
            }
        };
        var chart = new ApexCharts(document.querySelector("#areaChartApu"), options);
        chart.render();
    }

</script>
</body>

</html>